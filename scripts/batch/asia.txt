## This batch file is setup to test the new cache pop in Asia.
## We hard code the locations to make it easy: We run it in
## one WebPageTest job.

## ap-northeast-1 = Asia Pacific (Tokyo)
## ap-south-1	= India (Mumbai)

# To run this you need to set the following environment variables:
# WMF_WPT_KEY - The secret API key for our WebPageTest instance
# STATSV_ENDPOINT - The endpoint of where we send the statsv data
# WPT_RUNS - The number of runs per test

# Example (make sure to change WMF_WPT_KEY)
# $ WMF_WPT_KEY=SECRET_KEY STATSV_ENDPOINT=http://localhost WPT_RUNS=1 bin/index.js --batch scripts/batch/asia.txt

# Test from Tokyo using Chrome
--webPageTestKey <%WMF_WPT_KEY> --webPageTestHost wpt.wmftest.org --median SpeedIndex --location ap-northeast-1:Chrome --label chrome-asia --runs <%WPT_RUNS> --endpoint <%STATSV_ENDPOINT> --namespace webpagetest.jpwiki.anonymous.Japan --reporter statsv --timeline true --bodies true https://ja.wikipedia.org/wiki/%E6%97%A5%E6%9C%AC

--webPageTestKey <%WMF_WPT_KEY> --webPageTestHost wpt.wmftest.org --median SpeedIndex --location ap-northeast-1:Chrome --label chrome-asia --runs <%WPT_RUNS> --endpoint <%STATSV_ENDPOINT> --namespace webpagetest.jpwiki.anonymous.HKT48 --reporter statsv --timeline true --bodies true https://ja.wikipedia.org/wiki/HKT48

# Test from Tokyo using Firefox

--webPageTestKey <%WMF_WPT_KEY> --webPageTestHost wpt.wmftest.org --median SpeedIndex --location ap-northeast-1:Firefox --label firefox-asia --runs <%WPT_RUNS> --endpoint <%STATSV_ENDPOINT> --namespace webpagetest.jpwiki.anonymous.Japan --reporter statsv --timeline true --bodies true https://ja.wikipedia.org/wiki/%E6%97%A5%E6%9C%AC

--webPageTestKey <%WMF_WPT_KEY> --webPageTestHost wpt.wmftest.org --median SpeedIndex --location ap-northeast-1:Firefox --label firefox-asia --runs <%WPT_RUNS> --endpoint <%STATSV_ENDPOINT> --namespace webpagetest.jpwiki.anonymous.HKT48 --reporter statsv --timeline true --bodies true https://ja.wikipedia.org/wiki/HKT48


# Test from Tokyo using Chrome emulated mobile

--webPageTestKey <%WMF_WPT_KEY> --webPageTestHost wpt.wmftest.org --median SpeedIndex --location ap-northeast-1:Chrome --label chrome-emulated-m-asia --runs <%WPT_MOBILE_RUNS> --endpoint <%STATSV_ENDPOINT> --namespace webpagetest.jpwiki-mobile.anonymous.Japan --emulateMobile true --connectivity 3GFast --reporter statsv --timeline true --bodies true https://ja.m.wikipedia.org/wiki/%E6%97%A5%E6%9C%AC

--webPageTestKey <%WMF_WPT_KEY> --webPageTestHost wpt.wmftest.org --median SpeedIndex --location ap-northeast-1:Chrome --label chrome-emulated-m-asia --runs <%WPT_MOBILE_RUNS> --endpoint <%STATSV_ENDPOINT> --namespace webpagetest.jpwiki-mobile.anonymous.HKT48 --emulateMobile true --connectivity 3GFast --reporter statsv --timeline true --bodies true https://ja.m.wikipedia.org/wiki/HKT48


## All the tests for Mumbai
# Test from Mumbai using Chrome

--webPageTestKey <%WMF_WPT_KEY> --webPageTestHost wpt.wmftest.org --median SpeedIndex --location ap-south-1:Chrome --label chrome-asia --runs <%WPT_RUNS> --endpoint <%STATSV_ENDPOINT> --namespace webpagetest.enwiki.anonymous.GoodsAndServicesTax --reporter statsv --timeline true --bodies true https://en.wikipedia.org/wiki/Goods_and_Services_Tax

--webPageTestKey <%WMF_WPT_KEY> --webPageTestHost wpt.wmftest.org --median SpeedIndex --location ap-south-1:Chrome --label chrome-asia --runs <%WPT_RUNS> --endpoint <%STATSV_ENDPOINT> --namespace webpagetest.enwiki.anonymous.Baahubali2 --reporter statsv --timeline true --bodies true https://en.wikipedia.org/wiki/Baahubali_2:_The_Conclusion

# Test from Mumbai using Firefox
--webPageTestKey <%WMF_WPT_KEY> --webPageTestHost wpt.wmftest.org --median SpeedIndex --location ap-south-1:Firefox --label firefox-asia --runs <%WPT_RUNS> --endpoint <%STATSV_ENDPOINT> --namespace webpagetest.enwiki.anonymous.Baahubali2 --reporter statsv --timeline true --bodies true https://en.wikipedia.org/wiki/Baahubali_2:_The_Conclusion

--webPageTestKey <%WMF_WPT_KEY> --webPageTestHost wpt.wmftest.org --median SpeedIndex --location ap-south-1:Firefox --label firefox-asia --runs <%WPT_RUNS> --endpoint <%STATSV_ENDPOINT> --namespace webpagetest.enwiki.anonymous.GoodsAndServicesTax --reporter statsv --timeline true --bodies true https://en.wikipedia.org/wiki/Goods_and_Services_Tax

# Test from Mumbai using Chrome emulated mobile
--webPageTestKey <%WMF_WPT_KEY> --webPageTestHost wpt.wmftest.org --median SpeedIndex --location ap-south-1:Chrome --label chrome-emulated-m-asia --runs <%WPT_MOBILE_RUNS> --endpoint <%STATSV_ENDPOINT> --namespace webpagetest.enwiki-mobile.anonymous.Baahubali2 --emulateMobile true --connectivity 3GFast --reporter statsv --timeline true --bodies true https://en.m.wikipedia.org/wiki/Baahubali_2:_The_Conclusion

--webPageTestKey <%WMF_WPT_KEY> --webPageTestHost wpt.wmftest.org --median SpeedIndex --location ap-south-1:Chrome --label chrome-emulated-m-asia --runs <%WPT_MOBILE_RUNS> --endpoint <%STATSV_ENDPOINT> --namespace webpagetest.enwiki-mobile.anonymous.GoodsAndServicesTax --emulateMobile true --connectivity 3GFast --reporter statsv --timeline true --bodies true https://en.m.wikipedia.org/wiki/Goods_and_Services_Tax
